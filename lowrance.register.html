<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription Lowrance</title>
    <!-- Lien vers le fichier CSS -->
    <link rel="stylesheet" href="styles.register.css">
    <!-- Script pour g√©rer le cooldown, validation et correspondance des mots de passe -->
    <script>
        // Cooldown pour le bouton d'inscription avec message d'√©chec apr√®s 3 secondes
        function cooldownBouton() {
            var bouton = document.getElementById('submitButton');
            var errorMsg = document.getElementById('error-message');
            errorMsg.innerText = '';  // R√©initialise le message d'erreur s'il existe
            bouton.disabled = true;  // D√©sactive le bouton
            bouton.innerText = 'Inscription en cours...';  // Change le texte du bouton

            // R√©active le bouton apr√®s 3 secondes
            setTimeout(function() {
                bouton.innerText = 'Inscription √©chou√©e, r√©essayer';  // Affiche message d'√©chec
                setTimeout(function() {
                    bouton.disabled = false;  // R√©active le bouton apr√®s l'√©chec
                    bouton.innerText = 'S\'inscrire';  // Remet le texte d'origine
                }, 2000);  // Garde "Inscription √©chou√©e" pendant 2 secondes
            }, 3000);  // 3000 millisecondes = 3 secondes
        }

        // Validation des caract√®res (lettres et chiffres seulement) pour username et password
        function validateInput(event) {
            var regex = /^[a-zA-Z0-9]*$/;
            var input = event.target.value;
            var errorMsg = document.getElementById('error-message'); // R√©cup√®re l'√©l√©ment du message d'erreur

            if (!regex.test(input)) {
                errorMsg.innerText = 'Seules les lettres et les chiffres sont autoris√©s pour le nom d\'utilisateur et le mot de passe.';  // Message en rouge
                event.target.value = input.replace(/[^a-zA-Z0-9]/g, "");  // Supprime les caract√®res non valides
            } else {
                errorMsg.innerText = '';  // Enl√®ve le message si tout est valide
            }
        }

        // Validation de l'email
        function validateEmail() {
            var email = document.getElementById('email').value;
            var regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;  // Expression r√©guli√®re pour v√©rifier l'email
            var errorMsg = document.getElementById('error-message');

            if (!regex.test(email)) {
                errorMsg.innerText = 'Veuillez entrer une adresse email valide.';
            } else {
                errorMsg.innerText = '';
            }
        }
    </script>
</head>
<body>
    <a href="index.html"class="logo">üè†</a>
    <div class="login-container">
        <h2>Inscription √† Lowrance</h2>

        <!-- Message d'erreur affich√© ici -->
        <p id="error-message"></p>

        <form action="/register" method="POST" onsubmit="cooldownBouton(); return false;">
            <div class="form-group">
                <label for="username">Nom d'utilisateur :</label>
                <input type="text" id="username" name="username" required oninput="validateInput(event)">
            </div>
            <div class="form-group">
                <label for="email">Email :</label>
                <input type="email" id="email" name="email" required oninput="validateEmail()">
            </div>
            <div class="form-group">
                <label for="passwd">Mot de passe :</label>
                <input type="password" id="passwd" name="passwd" required oninput="validateInput(event)">
            </div>
            <div class="form-group">
                <button type="submit" id="submitButton">S'inscrire</button>
            </div>
        </form>

        <!-- Lien pour retourner √† la connexion -->
        <p class="register-text">D√©j√† un compte ? <a href="lowrance.connect.html" id="login-link">Connectez-vous ici</a></p>
    </div>
</body>
</html>
